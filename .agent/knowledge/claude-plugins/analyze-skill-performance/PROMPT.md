# Skill 性能分析 Prompt

**使用方式**: 复制此 Prompt，填入具体信息后直接执行

---

你的任务是分析 Skill "{{skill_name}}" 的执行表现。

## 输入信息
- **Skill 路径**: `{{skill_path}}`
- **执行统计**:
  - 总执行次数: {{execution_count}}
  - 成功: {{success_count}}
  - 失败: {{failure_count}}
- **日志目录**: `{{logs_path}}`

## 分析步骤

### 步骤 1: 读取当前 Skill
```bash
Read: {{skill_path}}/SKILL.md
```

### 步骤 2: 读取所有执行日志
```bash
Read: {{logs_path}}/2026-01-12-success.md
Read: {{logs_path}}/2026-01-13-failed.md
...
```

### 步骤 3: 识别模式
在日志中查找:
- 重复出现的问题 (如"环境变量缺失"出现 3 次)
- 用户频繁手动干预 (如每次都要手动配置 X)
- 缺失的检查步骤 (如失败前没有验证 Y)
- 可以自动化的步骤

### 步骤 4: 生成报告

输出格式:
```markdown
# {{skill_name}} 性能分析报告

**分析日期**: {{date}}
**执行统计**: {{count}} 次 (成功 {{success}}, 失败 {{failure}})
**成功率**: {{success_rate}}%

## 发现的问题
1. **环境变量检查缺失** - 出现 3 次
   - 现象: 部署成功但运行时报错
   - 影响: 需要手动回滚并重新部署

2. **vercel.json 格式未验证** - 出现 1 次
   - 现象: JSON 格式错误导致部署失败

## 改进建议 (优先级排序)

### 🔴 高优先级
1. **添加环境变量验证步骤**
   - 理由: 避免部署后才发现缺失
   - 实施: 在执行部署前检查关键环境变量

### 🟡 中优先级
2. **添加 vercel.json 格式验证**
   - 理由: 提前发现格式错误
   - 实施: 使用 jq 验证 JSON 格式

## 建议的修改 (Diff)

\`\`\`diff
文件: SKILL.md

## 执行步骤
1. 检查 vercel.json 是否存在
-2. 执行部署命令
+2. 验证环境变量配置
+   - 检查 NEXT_PUBLIC_API_URL
+   - 检查 DATABASE_URL (如果需要)
+3. 验证 vercel.json 格式 (使用 jq)
+4. 执行部署命令
\`\`\`

## 风险评估
- **破坏性风险**: 🟢 低
- **理由**:
  - 新增步骤不会影响原有流程
  - 环境变量验证只是检查，不修改
  - 如果检查失败会提前报错，避免无效部署
```

---

**重要原则**:
1. 改进建议必须基于日志中的实际问题
2. 不要臆测或凭空想象问题
3. 如果日志显示"没有明显问题"，说明 Skill 已足够成熟
4. 展示 Diff 时要完整，不要省略上下文
