@import 'tailwindcss';
@import './theme.css';

@custom-variant dark (&:is(.dark *));

@plugin 'tailwindcss-animate';

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground font-sans;
    overflow-x: hidden; /* Prevent horizontal scrollbar from glow effects */
  }
  
  /* === Custom Scrollbar (Webkit) === */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  ::-webkit-scrollbar-track {
    background: transparent; /* è½¨é“é€æ˜ */
  }
  
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.3); /* æ·±è‰²åŠé€æ˜ */
    border-radius: 10px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.6); /* Hover æ—¶å˜äº® */
  }
  
  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.3) transparent;
    -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
  }
  
  /* === Selection Color (èµ›åšé»„åº•é»‘å­— - ä½¿ç”¨ CSS å˜é‡) === */
  *::selection {
    background-color: var(--primary) !important;
    color: var(--primary-foreground) !important;
    -webkit-text-fill-color: var(--primary-foreground) !important;
  }
  
  /* å…¼å®¹ Firefox */
  *::-moz-selection {
    background-color: var(--primary) !important;
    color: var(--primary-foreground) !important;
  }

  /* === åŸç”Ÿè§¦æ„Ÿä¼˜åŒ– (Native Touch Feel) === */
  
  /* ç§»é™¤åŒå‡»ç¼©æ”¾å»¶è¿Ÿï¼Œå…¨å±€åº”ç”¨ */
  html {
    touch-action: manipulation;
    scroll-behavior: smooth;
  }

  /* é˜»æ­¢æŒ‰é’®/äº¤äº’å…ƒç´ çš„æ–‡æœ¬é€‰æ‹© */
  button, a, [role="button"], .no-select {
    user-select: none;
    -webkit-user-select: none;
  }

  /* é€šç”¨æŒ‰å‹åé¦ˆ - åŸç”Ÿ App é£æ ¼ */
  button:active, 
  a:active, 
  [role="button"]:active {
    transform: scale(0.97);
    opacity: 0.9;
    transition: transform 0.1s ease, opacity 0.1s ease;
  }

  /* é˜»æ­¢ iOS å¼¹æ€§æ»šåŠ¨éœ²åº• */
  body {
    overscroll-behavior-y: none;
  }
}

.container {
  @apply mx-auto max-w-7xl px-4 md:px-8;
}

/* Hide scrollbar for Chrome, Safari and Opera */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.scrollbar-hide {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

input,
select,
textarea {
  @apply border-border outline-ring/50;
  /* NOTE: bg-background removed to allow semantic classes like bg-input-bg to work */
}

button {
  @apply outline-ring/50 cursor-pointer;
  /* NOTE: border-border removed - button variants define their own border colors */
}

pre {
  @apply px-4;
}

.docs th,
.docs td {
  @apply border-border border p-3;
}

@theme inline {
  /* Layout dimensions */
  --header-height: 4rem; /* 64px - standard header height for all layouts */
  
  --animate-grid: grid 15s linear infinite;
  @keyframes grid {
    0% {
      transform: translateY(-50%);
    }
    100% {
      transform: translateY(0);
    }
  }
  --animate-ripple: ripple var(--duration, 2s) ease calc(var(--i, 0) * 0.2s)
    infinite;
  @keyframes ripple {
    0%,
    100% {
      transform: translate(-50%, -50%) scale(1);
    }
    50% {
      transform: translate(-50%, -50%) scale(0.9);
    }
  }
  --animate-meteor: meteor 5s linear infinite;
  @keyframes meteor {
    0% {
      transform: rotate(var(--angle)) translateX(0);
      opacity: 1;
    }
    70% {
      opacity: 1;
    }
    100% {
      transform: rotate(var(--angle)) translateX(-500px);
      opacity: 0;
    }
  }
  --animate-marquee: marquee var(--duration) infinite linear;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;
  @keyframes marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(calc(-100% - var(--gap)));
    }
  }
  @keyframes marquee-vertical {
    from {
      transform: translateY(0);
    }
    to {
      transform: translateY(calc(-100% - var(--gap)));
    }
  }

  /* Highlight Flash Animation - for Prompt highlight click navigation */
  --animate-highlight-flash: highlight-flash 1.5s ease-in-out;
  @keyframes highlight-flash {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
    }
    25%, 75% {
      box-shadow: 0 0 20px 5px rgba(37, 99, 235, 0.3);
    }
    50% {
      box-shadow: 0 0 30px 10px rgba(37, 99, 235, 0.5);
    }
  }
}

::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

/* Duplicate @layer base removed - see lines 8-15 */

/* NextTopLoader color override - uses theme primary color */
#nprogress .bar {
  background: var(--primary) !important;
}

#nprogress .peg {
  box-shadow: 0 0 10px var(--primary), 0 0 5px var(--primary) !important;
}

#nprogress .spinner-icon {
  border-top-color: var(--primary) !important;
  border-left-color: var(--primary) !important;
}

/* Masonry Grid Styles */
.masonry-grid_column {
  background-clip: padding-box;
}

/* === ç”»å»Šå¡ç‰‡æ€§èƒ½ä¼˜åŒ– === */
.masonry-grid_column > * {
  contain: layout style paint; /* é™åˆ¶é‡æ’èŒƒå›´ */
}

/* === ç‰©ç†å®‰å…¨åŒºé€‚é… (åˆ˜æµ·å±/åº•éƒ¨ Home æ¡) === */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-x {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* ===== Premium Dark Theme Utilities ===== */

/* Custom Scrollbar - Thin and subtle */
.custom-scrollbar::-webkit-scrollbar {
  width: 4px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.4);
}

/* Text Selection Highlight - Blue tint */
::selection {
  background-color: rgba(37, 99, 235, 0.3);
}

/* Native Select Styling */
select.premium-select {
  @apply appearance-none cursor-pointer transition-colors;
  background-image: none;
}

/* Input/Textarea Focus States */
.premium-input:focus {
  @apply outline-none border-primary/50 ring-1 ring-primary/20;
}

/* Card Glow Effect */
.card-glow {
  box-shadow:
    0 0 20px -5px rgba(37, 99, 235, 0.4),
    0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

/* Ambient Background Glow */
.ambient-glow {
  position: absolute;
  width: 16rem;
  height: 16rem;
  background: rgba(37, 99, 235, 0.1);
  filter: blur(80px);
  pointer-events: none;
}

/* Button Press Effect */
.btn-press:active {
  transform: scale(0.98);
}

/* Button Hover Overlay Animation */
.btn-hover-overlay {
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(100%);
  transition: transform 0.3s ease;
}
.group:hover .btn-hover-overlay {
  transform: translateY(0);
}

/* ===== Cyber-Banana Custom Cursors ===== */
:root {
  /* ä½¿ç”¨æ–‡ä»¶è·¯å¾„å¼•ç”¨ï¼Œå®‰å…¨ä¸”æ¸…æ™° */
  --cursor-default: url('/cursors/default.svg') 0 0, auto;
  --cursor-pointer: url('/cursors/pointer.svg') 12 12, pointer;
  --cursor-text: url('/cursors/text.svg') 12 12, text;
  --cursor-help: url('/cursors/help.svg') 12 12, help;
  --cursor-grab: url('/cursors/grab.svg') 12 12, grab;
}

/* åº”ç”¨åˆ°å…¨å±€ */
body {
  cursor: var(--cursor-default);
}

/* äº¤äº’å…ƒç´  */
a, button, [role="button"], label[for], select, summary {
  cursor: var(--cursor-pointer);
}

/* æ–‡æœ¬è¾“å…¥ */
input[type="text"], input[type="email"], input[type="password"], input[type="search"], input[type="url"], input[type="tel"], input[type="number"], textarea, [contenteditable="true"] {
  cursor: var(--cursor-text);
}

/* è¦†ç›– Tailwind cursor-help */
.cursor-help, [title]:not(button):not(a) {
  cursor: var(--cursor-help) !important;
}

/* è¦†ç›– Tailwind cursor-grab/grabbing (Slider ç­‰æ‹–æ‹½å…ƒç´ ) */
.cursor-grab, [data-slot="slider-thumb"] {
  cursor: var(--cursor-grab) !important;
}
.cursor-grabbing, .cursor-grab:active, [data-slot="slider-thumb"]:active {
  cursor: var(--cursor-grab) !important;
}

/* ===== Mobile Performance Optimizations ===== */
/* Phase 2: Aggressive GPU optimization for mobile & tablet */

@media (max-width: 768px) {
  /* å®Œå…¨ç¦ç”¨å¤§é¢ç§¯æ¨¡ç³Š - GPUæ€æ‰‹ */
  .backdrop-blur-3xl,
  .backdrop-blur-2xl {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    /* ç”¨ä¸»é¢˜æ„ŸçŸ¥çš„åŠé€æ˜èƒŒæ™¯è¡¥å¿è§†è§‰æ•ˆæœ */
    background-color: hsl(var(--card) / 0.9) !important;
  }
  
  /* é™çº§ä¸­ç­‰æ¨¡ç³Šä¸ºè½»å¾®æ¨¡ç³Š */
  .backdrop-blur-xl {
    backdrop-filter: blur(4px) !important;
    -webkit-backdrop-filter: blur(4px) !important;
  }
  
  /* é™çº§æ ‡å‡†æ¨¡ç³Š */
  .backdrop-blur-lg,
  .backdrop-blur-md {
    backdrop-filter: blur(2px) !important;
    -webkit-backdrop-filter: blur(2px) !important;
  }
  
  /* ç¦ç”¨å¤§é¢ç§¯ blur èƒŒæ™¯æ•ˆæœ */
  .blur-\[100px\],
  .blur-\[120px\] {
    filter: none !important;
    opacity: 0.5 !important;
  }
  
  /* ä¼˜åŒ–ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* ç§»åŠ¨ç«¯å‡å°‘åŠ¨ç”»å¤æ‚åº¦ */
  .animate-shimmer {
    animation: none !important;
    background-size: 100% 100% !important;
  }
  
  /* ç§»åŠ¨ç«¯ç¦ç”¨å¤æ‚é˜´å½± */
  .shadow-2xl {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
  }
}

/* ===== ğŸš€ Performance-First CSS Animations ===== */
/* SSR-safe: Content visible immediately, animation is progressive enhancement */

@keyframes fade-in {
  from { opacity: 0.7; }
  to { opacity: 1; }
}

@keyframes fade-in-up {
  from { 
    opacity: 0.7; 
    transform: translateY(10px);
  }
  to { 
    opacity: 1; 
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out forwards;
}

.animate-fade-in-up {
  animation: fade-in-up 0.5s ease-out forwards;
}

/* Animation delay utilities for staggered reveal */
.animation-delay-100 { animation-delay: 100ms; }
.animation-delay-200 { animation-delay: 200ms; }
.animation-delay-300 { animation-delay: 300ms; }
.animation-delay-400 { animation-delay: 400ms; }
.animation-delay-500 { animation-delay: 500ms; }
.animation-delay-600 { animation-delay: 600ms; }

/* ğŸš€ LCP CRITICAL: Do NOT set opacity:0 here!
   Content must be visible for Lighthouse. */

/* ===== Cyberpunk Shimmer Animation ===== */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}


